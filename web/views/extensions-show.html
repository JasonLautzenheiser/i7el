{% extends 'layout.html' %}
{% import 'macros.html' as macros %}

{% block title %}{{ title }} by {{ author }} - {% endblock %}

{#
{% block head %}
<script>
	{% if showdialog %}
		i7el.i7versions = {{ js.i7versions|json|safe }};
		$( function()
		{
			i7el.choose_i7versions({
				slug: '{{ slug }}',
				version: '{{ current.version }}',
				alert: {{ alert|json|safe }},
				i7versions: [],
			});
		});
	{% endif %}
</script>
{% endblock %}
#}

{% block content %}
<div class="col-md-12">
	<h1>{{ title }} by {{ author }} <small>
		<a href="/extensions?search={{ author }}" title="Search for other extensions by this author">{{ macros.icon( 'user', 'Search for other extensions by this author' ) }}</a>
		{% if user && user.can.editany -%}
			{%- if approved -%}
				<a href="/extensions/{{ slug }}/edit/?approved=0" title="Approved for the Public Library; click to reject">{{ macros.icon( 'check-circle text-success', 'Approved for the Public Library; click to reject' ) }}</a>
			{%- else -%}
				<a href="/extensions/{{ slug }}/edit/?approved=1" title="Not approved for the Public Library; click to approve">{{ macros.icon( 'check-circle text-muted', 'Not approved for the Public Library; click to approve' ) }}</a>
			{%- endif -%}
		{%- elif approved -%}
			{{ macros.icon( 'check-circle text-success', 'Approved for the Public Library', 'Approved for the Public Library' ) }}
		{%- endif -%}
	</small></h1>
</div>
{{ macros.alert( alert, 'col-md-12' ) }}
<div class="col-md-4">
	<h2>Versions</h2>
	<p><a class="btn btn-lg btn-primary btn-block text-wrap btn-download" href="/extensions/{{ slug }}/versions/{{ current.version }}">{{ macros.icon( 'download' ) }} Download version {{ current.version }}{% if current.i7releases %}<small>For Inform 7 {{ current.i7releases }}</small>{% endif %}</a>
	<p><a href="/extensions/{{ slug }}/versions">View all versions</a>
	{% if user && user.can.editthis %}
		<h2>Actions</h2>
		<ul class="list-unstyled">
			<li><a href="/extensions/new">Upload a new version</a></li>
			<li><a href="/extensions/{{ slug }}/edit">Edit</a></li>
		</ul>
	{% endif %}
</div>
<div class="col-md-8">
	<h2>Description</h2>
	<p>{% if description %}{{ description }}{% else %}<i>No description provided</i>{% endif %}</p>
	<h2>Documentation</h2>
	<p>{% if documentation %}{{ documentation }}{% else %}<i>No documentation provided</i>{% endif %}</p>
</div>
{% endblock %}
